<!doctype html>
<html>
  <head>
  </head>
  <body>
    <script type="text/javascript">
      const delay = (ms) => new Promise(resolve => setTimeout(resolve, ms))

      const asciiToHex = (input) => {
        let output = ''
        for (let i = 0; i < input.length; ++i) {
          output += input.charCodeAt(i).toString(16).padStart(2, '0')
        }
        return output
      }
      
      const run = async () => {
        const socket = new WebSocket('ws://192.168.0.83:2323') // Galaxy-Tab-A7-Lite.local
        console.log('opening...')
        await new Promise(resolve => socket.addEventListener('open', resolve))
        console.log('opened')
        socket.addEventListener('message', (event) => {
          console.log(event.data)
        })
        for (;;) {
          socket.send(asciiToHex('atz\r\n'))
          await delay(100)
          socket.send(asciiToHex('ati\r\n'))
          await delay(100)
        }
      }

      run()
    </script>
  </body>
</html>